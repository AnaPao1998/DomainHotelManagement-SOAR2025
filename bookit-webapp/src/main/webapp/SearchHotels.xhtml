<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/GuestTemplate.xhtml">

    <ui:define name="pageTitle">Hotel Search</ui:define>

    <ui:define name="guestContent">
        <p:panel style="margin-top: 15px;" header="Search and Book Hotels">

            <p:panelGrid columns="2" layout="auto" style="width: 100%;" columnClasses="ui-g-3,ui-g-9">

                <p:panel header="Search Criteria" style="height: 100%;">
                    <h:form id="searchForm">
                        <p:panelGrid columns="1" layout="grid" style="width: 100%;">

                            <p:inputText placeholder="Country"
                                         value="#{searchBean.country}"
                                         style="width: 100%;"/>

                            <p:inputText placeholder="City"
                                         value="#{searchBean.city}"
                                         style="width: 100%;"/>

                            <p:selectOneMenu value="#{searchBean.numberOfGuests}"
                                             style="width: 100%;"
                                             label="Number of Guests">
                                <f:selectItem itemLabel="Number of Guests" itemValue="0" noSelectionOption="true"/>
                                <f:selectItem itemLabel="1" itemValue="1"/>
                                <f:selectItem itemLabel="2" itemValue="2"/>
                                <f:selectItem itemLabel="3+" itemValue="3"/>
                            </p:selectOneMenu>

                            <p:datePicker placeholder="Check-in Date"
                                          value="#{searchBean.checkInDate}"
                                          showIcon="true" style="width: 100%;"/>

                            <p:datePicker placeholder="Check-out Date"
                                          value="#{searchBean.checkOutDate}"
                                          showIcon="true" style="width: 100%;"/>

                            <p:separator/>

                            <h:outputText value="Amenities:" style="font-weight: bold; margin-top: 10px;"/>
                            <p:selectBooleanCheckbox itemLabel="Parking" value="#{searchBean.parking}"/>
                            <p:selectBooleanCheckbox itemLabel="Breakfast Included" value="#{searchBean.breakfast}"/>
                            <p:selectBooleanCheckbox itemLabel="WiFi" value="#{searchBean.wifi}"/>

                            <p:commandButton value="Search"
                                             icon="pi pi-search"
                                             action="#{searchBean.searchHotels}"
                                             update=":resultsPanel"
                                             style="margin-top: 20px; width: 100%;"/>
                        </p:panelGrid>
                    </h:form>
                </p:panel>

                <p:panel id="resultsPanel" header="Search Results:">

                    <p:dataList id="resultsList"
                                value="#{searchBean.results}"
                                var="hotel"
                                type="none"
                                emptyMessage="No hotels found matching your criteria.">

                        <p:card style="margin-bottom: 20px;">
                            <p:panelGrid columns="2" layout="auto" columnClasses="ui-g-8,ui-g-4">
                                <h:panelGroup>
                                    <h3>#{hotel.name}</h3>
                                    <h:outputText value="#{hotel.city}, #{hotel.country}" style="display: block;"/>
                                    <h:outputText value="#{hotel.description}" style="font-style: italic; margin-top: 5px;"/>
                                </h:panelGroup>
                                <h:panelGroup style="text-align: right;">
                                    <h:outputText value="[Hotel Photo]" style="display: block; margin-bottom: 10px; color: #666;"/>
                                    <p:button value="Book this Hotel"
                                              icon="pi pi-book"
                                              outcome="HotelDetail.xhtml">
                                        <f:param name="hotelId" value="#{hotel.hotelId}"/>
                                    </p:button>
                                </h:panelGroup>
                            </p:panelGrid>
                        </p:card>

                    </p:dataList>
                    <p:growl id="growl" showDetail="true"/>
                </p:panel>
            </p:panelGrid>
        </p:panel>
    </ui:define>
</ui:composition>